-- ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

----------------------------------------------------------------
-- ‚öôÔ∏è CONFIG (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)
----------------------------------------------------------------
local Config = {
	Speed = 100,

	-- ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠ Remote ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)
	EggRemoteName = "BuyEggFunction", 
	PotionRemoteName = "BuyPotionFunction",

	-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏Ç‡πà (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°)
	EggList = {
		"Plain Egg", "Mud Egg", "Speckled Egg", "Hydro Egg", 
		"Tentacle Egg", "Frost Egg", "Demon Egg", "Horn Egg", 
		"Cacti Egg", "Volt Egg", "Plume Egg", "Tiger Egg"
	},

	-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤
	PotionList = {
		"Size Potion", "Rebirth Potion", "Enchant Potion"
	}
}

-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á (‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
local SelectedEggs = {} 
local SelectedPotions = {}

----------------------------------------------------------------
-- üñ•Ô∏è GUI SETUP (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á)
----------------------------------------------------------------
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MultiAutoGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 360, 0, 500) -- ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
MainFrame.Position = UDim2.new(0.5, -180, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (Title)
local TitleBar = Instance.new("TextLabel")
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
TitleBar.Text = "  Multi-Buy System (‡∏•‡∏≤‡∏Å‡πÑ‡∏î‡πâ)"
TitleBar.TextColor3 = Color3.new(1,1,1)
TitleBar.Font = Enum.Font.GothamBold
TitleBar.TextSize = 18
TitleBar.TextXAlignment = Enum.TextXAlignment.Left
TitleBar.Parent = MainFrame

-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πà‡∏≠/‡∏Ç‡∏¢‡∏≤‡∏¢
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 40, 0, 40)
MinBtn.Position = UDim2.new(1, -40, 0, 0)
MinBtn.BackgroundTransparency = 1
MinBtn.Text = "-"
MinBtn.TextColor3 = Color3.new(1,1,1)
MinBtn.TextSize = 24
MinBtn.Parent = TitleBar

-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (ScrollingFrame)
local Container = Instance.new("ScrollingFrame")
Container.Size = UDim2.new(1, -10, 1, -50)
Container.Position = UDim2.new(0, 5, 0, 45)
Container.BackgroundTransparency = 1
Container.ScrollBarThickness = 4
Container.Parent = MainFrame

local Layout = Instance.new("UIListLayout")
Layout.Parent = Container
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.Padding = UDim.new(0, 15)

----------------------------------------------------------------
-- üõ†Ô∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á GUI
----------------------------------------------------------------
local function createHeader(text)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1, 0, 0, 25)
	label.BackgroundTransparency = 1
	label.Text = "--- " .. text .. " ---"
	label.TextColor3 = Color3.fromRGB(255, 200, 50)
	label.Font = Enum.Font.GothamBold
	label.TextSize = 16
	label.Parent = Container
end

local function createGridArea()
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, 0, 0, 0) -- ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏à‡∏∞ Auto Size
	frame.BackgroundTransparency = 1
	frame.Parent = Container

	local grid = Instance.new("UIGridLayout")
	grid.CellSize = UDim2.new(0, 105, 0, 40) -- ‡∏Ç‡∏ô‡∏≤‡∏î‡∏õ‡∏∏‡πà‡∏°
	grid.CellPadding = UDim2.new(0, 5, 0, 5)
	grid.FillDirectionMaxCells = 3 -- ‡πÅ‡∏ñ‡∏ß‡∏•‡∏∞ 3 ‡∏õ‡∏∏‡πà‡∏°
	grid.Parent = frame

	return frame, grid
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á (Toggle Button)
local function createItemButton(name, tableRef, parentFrame)
	local btn = Instance.new("TextButton")
	btn.Text = name
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤ (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)
	btn.TextColor3 = Color3.new(0.8, 0.8, 0.8)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 12
	btn.TextWrapped = true
	btn.Parent = parentFrame

	-- ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 6)
	corner.Parent = btn

	-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
	btn.MouseButton1Click:Connect(function()
		tableRef[name] = not tableRef[name] -- ‡∏™‡∏•‡∏±‡∏ö True/False

		if tableRef[name] then
			-- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
			btn.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
			btn.TextColor3 = Color3.new(1,1,1)
		else
			-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤
			btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
			btn.TextColor3 = Color3.new(0.8, 0.8, 0.8)
		end
	end)
end

----------------------------------------------------------------
-- 1. ‡∏™‡πà‡∏ß‡∏ô Speed (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
----------------------------------------------------------------
createHeader("Movement")
local SpeedToggle = Instance.new("TextButton")
SpeedToggle.Size = UDim2.new(1, -10, 0, 45)
SpeedToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SpeedToggle.Text = "Speed Run: OFF"
SpeedToggle.TextColor3 = Color3.new(1,1,1)
SpeedToggle.Font = Enum.Font.GothamSemibold
SpeedToggle.TextSize = 16
SpeedToggle.Parent = Container

local speedActive = false
SpeedToggle.MouseButton1Click:Connect(function()
	speedActive = not speedActive
	if speedActive then
		SpeedToggle.Text = "Speed Run: ON"
		SpeedToggle.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
		if player.Character then player.Character.Humanoid.WalkSpeed = Config.Speed end
	else
		SpeedToggle.Text = "Speed Run: OFF"
		SpeedToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		if player.Character then player.Character.Humanoid.WalkSpeed = 16 end
	end
end)
player.CharacterAdded:Connect(function(c) 
	if speedActive then c:WaitForChild("Humanoid").WalkSpeed = Config.Speed end 
end)

----------------------------------------------------------------
-- 2. ‡∏™‡πà‡∏ß‡∏ô Eggs (Multi Select)
----------------------------------------------------------------
createHeader("Select Eggs to Buy")
local EggFrame, EggGrid = createGridArea()

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡πÑ‡∏Ç‡πà‡πÉ‡∏ô List
for _, eggName in ipairs(Config.EggList) do
	createItemButton(eggName, SelectedEggs, EggFrame)
end

-- ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏∏‡πà‡∏°
local rows = math.ceil(#Config.EggList / 3)
EggFrame.Size = UDim2.new(1, 0, 0, (rows * 45))

-- ‡∏õ‡∏∏‡πà‡∏° Master Switch (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏Ç‡πà)
local MasterEggBtn = Instance.new("TextButton")
MasterEggBtn.Size = UDim2.new(1, -10, 0, 45)
MasterEggBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50) -- ‡∏™‡∏µ‡πÅ‡∏î‡∏á
MasterEggBtn.Text = "[ STOPPED ] Press to Start Buying Eggs"
MasterEggBtn.TextColor3 = Color3.new(1,1,1)
MasterEggBtn.Font = Enum.Font.GothamBold
MasterEggBtn.TextSize = 16
MasterEggBtn.Parent = Container

local buyingEggs = false
MasterEggBtn.MouseButton1Click:Connect(function()
	buyingEggs = not buyingEggs
	if buyingEggs then
		MasterEggBtn.Text = "[ RUNNING ] Buying Selected Eggs..."
		MasterEggBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)

		-- Loop ‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏Ç‡πà
		task.spawn(function()
			while buyingEggs do
				local remote = ReplicatedStorage:FindFirstChild(Config.EggRemoteName)
				if remote then
					-- ‡∏ß‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÑ‡∏Ç‡πà‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡πâ‡∏≤‡∏á
					for name, isSelected in pairs(SelectedEggs) do
						if isSelected then
							-- ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏µ‡∏•‡∏∞‡∏≠‡∏±‡∏ô
							pcall(function()
								remote:FireServer(name, "Buy")
							end)
							task.wait(0.1) -- ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á
						end
					end
				end
				task.wait(0.5) -- ‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏ô
			end
		end)
	else
		MasterEggBtn.Text = "[ STOPPED ] Press to Start Buying Eggs"
		MasterEggBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	end
end)

----------------------------------------------------------------
-- 3. ‡∏™‡πà‡∏ß‡∏ô Potions (Multi Select)
----------------------------------------------------------------
createHeader("Select Potions")
local PotionFrame, PotionGrid = createGridArea()

for _, potName in ipairs(Config.PotionList) do
	createItemButton(potName, SelectedPotions, PotionFrame)
end
PotionFrame.Size = UDim2.new(1, 0, 0, 50) -- 3 ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

-- ‡∏õ‡∏∏‡πà‡∏° Master Switch (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤)
local MasterPotBtn = Instance.new("TextButton")
MasterPotBtn.Size = UDim2.new(1, -10, 0, 45)
MasterPotBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
MasterPotBtn.Text = "[ STOPPED ] Press to Start Buying Potions"
MasterPotBtn.TextColor3 = Color3.new(1,1,1)
MasterPotBtn.Font = Enum.Font.GothamBold
MasterPotBtn.TextSize = 16
MasterPotBtn.Parent = Container

local buyingPotions = false
MasterPotBtn.MouseButton1Click:Connect(function()
	buyingPotions = not buyingPotions
	if buyingPotions then
		MasterPotBtn.Text = "[ RUNNING ] Auto Buy Potions"
		MasterPotBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)

		-- Loop ‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤
		task.spawn(function()
			while buyingPotions do
				local remote = ReplicatedStorage:FindFirstChild(Config.PotionRemoteName)
				if remote then
					for name, isSelected in pairs(SelectedPotions) do
						if isSelected then
							pcall(function()
								remote:FireServer(name)
							end)
						end
					end
				end
				task.wait(2) -- ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ß‡∏°‡∏≤‡∏Å (2-5 ‡∏ß‡∏¥)
			end
		end)
	else
		MasterPotBtn.Text = "[ STOPPED ] Press to Start Buying Potions"
		MasterPotBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	end
end)

----------------------------------------------------------------
-- Logic ‡∏•‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á & ‡∏¢‡πà‡∏≠
----------------------------------------------------------------
local dragging, dragInput, dragStart, startPos
local function update(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end
TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true; dragStart = input.Position; startPos = MainFrame.Position
		input.Changed:Connect(function() if input.UserInputState == Enum.UserInputState.End then dragging = false end end)
	end
end)
TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end
end)
UserInputService.InputChanged:Connect(function(input) if input == dragInput and dragging then update(input) end end)

local isMin = false
MinBtn.MouseButton1Click:Connect(function()
	isMin = not isMin
	if isMin then
		MainFrame.Size = UDim2.new(0, 360, 0, 40)
		Container.Visible = false
		MinBtn.Text = "+"
	else
		MainFrame.Size = UDim2.new(0, 360, 0, 500)
		Container.Visible = true
		MinBtn.Text = "-"
	end
end)
